<!DOCTYPE html> <html lang="en" itemscope="" itemtype="http://schema.org/Article"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <meta name="google-site-verification" content="" /> <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0"> <meta name="theme-color" content="#FF9900"> <meta name="author" content="Vitaliy Zasadnyy"> <meta itemprop="name" content="Android form validation - the right way"> <meta name="description" itemprop="description" content=""> <meta name="keywords" content="developer, geek, google fan, gdg manager"> <!-- Social: Twitter --> <meta name="twitter:card" content="summary"> <meta name="twitter:site" content="@zasadnyy"> <meta name="twitter:title" content="Android form validation - the right way"> <meta name="twitter:description" content=""> <meta name="twitter:image:src" content="http://zasadnyy-inc.github.io/personal-site"> <!-- Social: Facebook / Open Graph --> <meta property="og:title" content="Android form validation - the right way" /> <meta property="og:site_name" content="Vitaliy Zasadnyy" /> <meta property="og:type" content="website" /> <meta property="og:url" content="http://zasadnyy-inc.github.io/personal-site" /> <meta property="og:description" content="" /> <meta property="og:image" content="http://zasadnyy-inc.github.io/personal-site" /> <link rel="canonical" href="http://zasadnyy-inc.github.io/personal-site/blog/android-form-validation-right-way"> <link rel="alternate" type="application/rss+xml" title="RSS" href="/personal-site/feed.xml"> <title>Android form validation - the right way &#8226; Vitaliy Zasadnyy</title> <link rel="shortcut icon" href="/personal-site/img/favicons/favicon.ico "> <link rel="apple-touch-icon" sizes="152x152" href="/personal-site/img/favicons/apple-touch-icon-152x152.png"> <link rel="apple-touch-icon" sizes="144x144" href="/personal-site/img/favicons/apple-touch-icon-144x144.png"> <link rel="apple-touch-icon" sizes="120x120" href="/personal-site/img/favicons/apple-touch-icon-120x120.png"> <link rel="apple-touch-icon" sizes="114x114" href="/personal-site/img/favicons/apple-touch-icon-114x114.png"> <link rel="apple-touch-icon" sizes="76x76" href="/personal-site/img/favicons/apple-touch-icon-76x76.png"> <link rel="apple-touch-icon" sizes="72x72" href="/personal-site/img/favicons/apple-touch-icon-72x72.png"> <link rel="apple-touch-icon" sizes="60x60" href="/personal-site/img/favicons/apple-touch-icon-60x60.png"> <link rel="apple-touch-icon" sizes="57x57" href="/personal-site/img/favicons/apple-touch-icon-57x57.png"> <link rel="icon" type="image/png" href="/personal-site/img/favicons/favicon-196x196.png"> <link rel="icon" type="image/png" href="/personal-site/img/favicons/favicon-160x160.png"> <link rel="icon" type="image/png" href="/personal-site/img/favicons/favicon-96x96.png"> <link rel="icon" type="image/png" href="/personal-site/img/favicons/favicon-32x32.png"> <link rel="icon" type="image/png" href="/personal-site/img/favicons/favicon-16x16.png"> <meta name="msapplication-TileColor" content="#2b5797"> <meta name="msapplication-TileImage" content="/personal-site/img/favicons/mstile-144x144.png"> <meta name="msapplication-config" content="/personal-site/img/favicons/browserconfig.xml"> <link rel="stylesheet" href="/personal-site/assets/blog-bf48ec20fc8810ff4e8987d3c4fc2ef1.css"> <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries --> <!-- WARNING: Respond.js doesn't work if you view the page via file:// --> <!--[if lt IE 9]> <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script> <![endif]--> </head> <body> <div class="container"> <header class="header"> <a class="logo-header" href="/personal-site/"> <img src="/personal-site/img/vitaliy/logo.svg" alt="Vitaliy Zasadnyy" height="100px" width="102px"> </a> <nav class="nav"> <ul> <li> <a class="nav-link " href="/personal-site/blog/" >Blog</a> </li> <li> <a class="nav-link " href="/personal-site/slides/" >Slides</a> </li> <li> <a class="nav-link " href="/personal-site/projects/" >Projects</a> </li> </ul> </nav> </header> </div> <div class="article-header container-fluid"> <div class="container"> <h1 class="article-title" itemprop="name">Android form validation - the right way</h1> <div class="row"> <div class="col-md-7"> <p class="article-description" itemprop="description"></p> </div> </div> </div> </div> <div class="container"> <div class="row"> <div class="article-meta col-md-5 col-xs-12"> <ul> <li> <span class="name">Date published:</span> <span class="value" itemprop="datePublished" content="2013-08-04">August 4, 2013</span> </li> <li> <span class="name">Est. Read Time:</span> <span class="value">5 mins</span> </li> <li> <span class="name">Share with:</span> <span class="value"> <a href="#" onclick="window.open('https://plus.google.com/share?url=http://zasadnyy-inc.github.io/personal-site/blog/android-form-validation-right-way', 'newwindow', 'width=600, height=500'); return false;">Google+</a> </span> <span>&#8226;</span> <span class="value"> <a href="#" onclick="window.open('https://twitter.com/home?status=http://zasadnyy-inc.github.io/personal-site/blog/android-form-validation-right-way', 'newwindow', 'width=600, height=250'); return false;">Twitter</a> </span> <span>&#8226;</span> <span class="value"> <a href="#" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=http://zasadnyy-inc.github.io/personal-site/blog/android-form-validation-right-way', 'newwindow', 'width=600, height=500'); return false;">Facebook</a> </span> </li> <li> <span class="name">Tags:</span> <span class="value"> #android, #best practices </span> </li> </ul> </div> <article class="article col-md-9" itemprop="articleBody"> <p>After quite a long pause, I’m getting back with new series of posts. And we’ll start with Android <code>EditText</code> form validations.</p> <p>At first lets define that Android form - it is set of EditText ‘s whose data should be processed. There are two main steps to make processing successful: data input and data validation.</p> <p><img src="/personal-site/img/vitaliy/posts/android-form-validation-right-way/z-validations-valid-form.png" alt="image" /> Chuck Noris is always valid</p> <h4 id="data-input">Data input</h4> <p>In order to make user input easy and comfortable we need to configure <code>EditText</code> properly, here is some tips on it:</p> <ul> <li>put constraints by specifying the type of keyboard you want for your <code>EditText</code> with <code>android:inputType</code> attribute. For example, if you want the user to input only digits write <code>android:inputType="number"</code></li> <li>besides specifying keyboard type using <code>android:inputType</code> attribute you can define other behaviors such as, whether to capitalize all new words or use features like auto-complete and spelling suggestions, e. g. <code>android:inputType="textCapWords|textNoSuggestions"</code>, note that you can put several markers using bitwise operator</li> <li>probably you’ll want to disable fullscreen keyboard on landscape mode, you can do this using <code>android:imeOptions="flagNoExtractUi"</code> attribute</li> <li>pre-fill form data and provide auto complete if possible, for example in email registration form you can get user email from <code>AccountManager</code>, <a href="http://stackoverflow.com/a/2175688/731775">example from Roman Nurik on stackoverflow</a></li> <li>validate and submit form when user press enter on last EditText field, here code snippet I use:</li> </ul> <figure class="code-highlight-figure"><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="n">mTextView</span><span class="o">.</span><span class="na">setOnEditorActionListener</span><span class="o">(</span><span class="k">new</span> <span class="n">TextView</span><span class="o">.</span><span class="na">OnEditorActionListener</span><span class="o">()</span> <span class="o">&#x7b;</span>
</div></div><div data-line="2" class="code-highlight-row numbered"><div class="code-highlight-line">    <span class="nd">@Override</span>
</div></div><div data-line="3" class="code-highlight-row numbered"><div class="code-highlight-line">    <span class="kd">public</span> <span class="kt">boolean</span> <span class="n">onEditorAction</span><span class="o">(</span><span class="n">TextView</span> <span class="n">view</span><span class="o">,</span> <span class="kt">int</span> <span class="n">actionId</span><span class="o">,</span> <span class="n">KeyEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">&#x7b;</span>
</div></div><div data-line="4" class="code-highlight-row numbered"><div class="code-highlight-line">        <span class="k">if</span> <span class="o">(</span><span class="n">actionId</span> <span class="o">==</span> <span class="n">EditorInfo</span><span class="o">.</span><span class="na">IME_ACTION_DONE</span><span class="o">)</span> <span class="o">&#x7b;</span>                    
</div></div><div data-line="5" class="code-highlight-row numbered"><div class="code-highlight-line">            <span class="n">validateAndSubmit</span><span class="o">();</span>
</div></div><div data-line="6" class="code-highlight-row numbered"><div class="code-highlight-line">            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
</div></div><div data-line="7" class="code-highlight-row numbered"><div class="code-highlight-line">        <span class="o">&#x7d;</span>
</div></div><div data-line="8" class="code-highlight-row numbered"><div class="code-highlight-line">        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
</div></div><div data-line="9" class="code-highlight-row numbered"><div class="code-highlight-line">    <span class="o">&#x7d;&#x7d;);</span> </div></div></pre></div></figure> <p>Here is code snippet from layout file with described above attributes:</p> <figure class="code-highlight-figure"><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="nt">&lt;EditText</span>
</div></div><div data-line="2" class="code-highlight-row numbered"><div class="code-highlight-line">        <span class="na">android:id=</span><span class="s">"@+id/postal_address"</span>
</div></div><div data-line="3" class="code-highlight-row numbered"><div class="code-highlight-line">        <span class="err">...</span>
</div></div><div data-line="4" class="code-highlight-row numbered"><div class="code-highlight-line">        <span class="na">android:inputType=</span><span class="s">"textPostalAddress|textCapWords"</span>
</div></div><div data-line="5" class="code-highlight-row numbered"><div class="code-highlight-line">        <span class="na">android:autoText=</span><span class="s">"false"</span>
</div></div><div data-line="6" class="code-highlight-row numbered"><div class="code-highlight-line">        <span class="na">android:editable=</span><span class="s">"true"</span>
</div></div><div data-line="7" class="code-highlight-row numbered"><div class="code-highlight-line">        <span class="na">android:selectAllOnFocus=</span><span class="s">"true"</span>
</div></div><div data-line="8" class="code-highlight-row numbered"><div class="code-highlight-line">        <span class="na">android:singleLine=</span><span class="s">"true"</span>
</div></div><div data-line="9" class="code-highlight-row numbered"><div class="code-highlight-line">        <span class="na">android:imeOptions=</span><span class="s">"flagNoExtractUi"</span>
</div></div><div data-line="10" class="code-highlight-row numbered"><div class="code-highlight-line">        <span class="na">android:hint=</span><span class="s">"Enter postal address"</span>
</div></div><div data-line="11" class="code-highlight-row numbered"><div class="code-highlight-line">        <span class="err">...</span>
</div></div><div data-line="12" class="code-highlight-row numbered"><div class="code-highlight-line">     <span class="nt">/&gt;</span></div></div></pre></div></figure> <h4 id="data-validation">Data validation</h4> <p>Actually question is not how to validate, but <strong>how to show validation errors in a user friendly way</strong>? </p> <p><a href="http://developer.android.com/reference/android/widget/TextView.html#setError(java.lang.CharSequence)">Android API</a> provide <code>public void setError(CharSequence error, Drawable icon)</code> method on EditText instance to display errors.</p> <p>As form validation is quite commom task there are several third party libraries for that, e.g.:</p> <ul> <li><a href="https://github.com/throrin19/Android-Validator">Android-Validator by Benjamin Besse</a></li> <li><a href="https://github.com/ragunathjawahar/android-saripaar">Android Saripaar by Ragunath Jawahar</a></li> </ul> <p>Both of this libraries use default API to display errors, personally I don’t like it because when there are a lot of validation rules neglectful user can get screen like this:</p> <p><img src="/personal-site/img/vitaliy/posts/android-form-validation-right-way/z-validations-bad-example.png" alt="image" /> Too much errors on one screen</p> <p>So what is <em>“the right way”</em>? Main idea is to help user <strong>solve errors one by one</strong>. There are several things to do when validation error happens:</p> <ul> <li>find first text view where validation failed</li> <li>request focus for it: <code>mTextView.requestFocus()</code></li> <li>show error message, I prefer using Crouton library: <code>Crouton.makeText(mActivity, message, Style.ALERT).show()</code></li> <li>open keyboard so user can start typing instantly:</li> </ul> <figure class="code-highlight-figure"><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="n">InputMethodManager</span> <span class="n">imm</span> <span class="o">=</span> <span class="o">(</span><span class="n">InputMethodManager</span><span class="o">)</span> <span class="n">mContext</span><span class="o">.</span><span class="na">getSystemService</span><span class="o">(</span><span class="n">Context</span><span class="o">.</span><span class="na">INPUT_METHOD_SERVICE</span><span class="o">);</span>
</div></div><div data-line="2" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="k">if</span> <span class="o">(</span><span class="n">imm</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">&#x7b;</span>
</div></div><div data-line="3" class="code-highlight-row numbered"><div class="code-highlight-line">    <span class="c1">// only will trigger it if no physical keyboard is open</span>
</div></div><div data-line="4" class="code-highlight-row numbered"><div class="code-highlight-line">    <span class="n">imm</span><span class="o">.</span><span class="na">showSoftInput</span><span class="o">(</span><span class="n">mTextView</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
</div></div><div data-line="5" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="o">&#x7d;</span></div></div></pre></div></figure> <p>I’ve created small library with sample project where you can find all examples from this post, check it out on <a href="https://github.com/zasadnyy/z-validations">GitHub</a> or install <a href="https://play.google.com/store/apps/details?id=ua.org.zasadnyy.sample.zvalidations">Demo app from Google Play</a>. Sample code of creating validation form:</p> <figure class="code-highlight-figure"><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="n">mForm</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Form</span><span class="o">(</span><span class="n">mActivity</span><span class="o">);</span>
</div></div><div data-line="2" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="n">mForm</span><span class="o">.</span><span class="na">addField</span><span class="o">(</span><span class="n">Field</span><span class="o">.</span><span class="na">using</span><span class="o">(</span><span class="n">mName</span><span class="o">).</span><span class="na">validate</span><span class="o">(</span><span class="n">NotEmpty</span><span class="o">.</span><span class="na">build</span><span class="o">(</span><span class="n">mContext</span><span class="o">)));</span>
</div></div><div data-line="3" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="n">mForm</span><span class="o">.</span><span class="na">addField</span><span class="o">(</span><span class="n">Field</span><span class="o">.</span><span class="na">using</span><span class="o">(</span><span class="n">mEmail</span><span class="o">).</span><span class="na">validate</span><span class="o">(</span><span class="n">NotEmpty</span><span class="o">.</span><span class="na">build</span><span class="o">(</span><span class="n">mContext</span><span class="o">)).</span><span class="na">validate</span><span class="o">(</span><span class="n">IsEmail</span><span class="o">.</span><span class="na">build</span><span class="o">(</span><span class="n">mContext</span><span class="o">)));</span>
</div></div><div data-line="4" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="n">mForm</span><span class="o">.</span><span class="na">addField</span><span class="o">(</span><span class="n">Field</span><span class="o">.</span><span class="na">using</span><span class="o">(</span><span class="n">mAge</span><span class="o">).</span><span class="na">validate</span><span class="o">(</span><span class="n">InRange</span><span class="o">.</span><span class="na">build</span><span class="o">(</span><span class="n">mContext</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">120</span><span class="o">)));</span>
</div></div><div data-line="5" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="kd">private</span> <span class="kt">void</span> <span class="nf">submit</span><span class="p">(</span><span class="o">)</span> <span class="o">&#x7b;</span>
</div></div><div data-line="6" class="code-highlight-row numbered"><div class="code-highlight-line">    <span class="k">if</span> <span class="o">(</span><span class="n">mForm</span><span class="o">.</span><span class="na">isValid</span><span class="o">())</span> <span class="o">&#x7b;</span>
</div></div><div data-line="7" class="code-highlight-row numbered"><div class="code-highlight-line">        <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="s">"Form is valid"</span><span class="o">,</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
</div></div><div data-line="8" class="code-highlight-row numbered"><div class="code-highlight-line">    <span class="o">&#x7d;</span>
</div></div><div data-line="9" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="o">&#x7d;</span></div></div></pre></div></figure> <p><img src="/personal-site/img/vitaliy/posts/android-form-validation-right-way/z-validations-not-in-range.png" alt="image" /> Failed InRange validation</p> <h5 id="useful-links">Useful links</h5> <p><em>(I’ll update lists every time I find related topics)</em></p> <ul> <li><a href="http://developer.android.com/guide/topics/ui/controls/text.html">Post about text input on d.android.com</a></li> </ul> <hr> Share with: <span class="value"> <a href="#" onclick="window.open('https://plus.google.com/share?url=http://zasadnyy-inc.github.io/personal-site/blog/android-form-validation-right-way', 'newwindow', 'width=600, height=500'); return false;">Google+</a> </span> <span>&#8226;</span> <span class="value"> <a href="#" onclick="window.open('https://twitter.com/home?status=http://zasadnyy-inc.github.io/personal-site/blog/android-form-validation-right-way', 'newwindow', 'width=600, height=250'); return false;">Twitter</a> </span> <span>&#8226;</span> <span class="value"> <a href="#" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=http://zasadnyy-inc.github.io/personal-site/blog/android-form-validation-right-way', 'newwindow', 'width=600, height=500'); return false;">Facebook</a> </span> </article> <div id="disqus_thread"></div> <script type="text/javascript"> var disqus_shortname = 'vzasadnyy'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </script> </div> </div> <div class="container-fluid footer-container"> <footer class="footer container"> <div class="row"> <div class="col-md-6"> <h4 class="hidden-xs">About</h4> <div class="author-photo flow-img img-circle" style="background-image: url(/personal-site/img/vitaliy/photo.jpg)"></div> <p class="author-about">Hi, my name is Vitaliy, I'm mobile developer and Google Developers Group Lviv co-founder. I'm interested in GameDev, Android, iOS, wearables and community management. Used to work for enterprise giants like EPAM as well as for product companies such as NRavo.</p> </div> <div class="get-in-touch col-md-4 col-md-offset-1"> <h4 class="hidden-xs">Get in touch</h4> <p class="author-social">You can find me on <a href='https://www.google.com/+VitalikZasadnyy' target='_blank'>Google+</a>, <a href='http://twitter.com/zasadnyy' target='_blank'>Twitter</a> or <a href='https://www.linkedin.com/in/zasadnyy' target='_blank'>LinkedIn</a>. If you want get me directly, please send me an <a href='mailto:vitaliy@zasadnyy.com' target='_blank'>email</a>.</p> <p class="subscribe">Subscribe with <a href="/personal-site/feed.xml">RSS</a>.</p> </div> <div class="clearfix"></div> <div class="license text-center"> <i>Except as otherwise noted, the content of this page is licensed under the Creative Commons Attribution 3.0 License, and code samples are licensed under the Apache 2.0 License.</i> </div> </div> </footer> </div> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', '', ''); ga('send', 'pageview'); </script> <script type="text/javascript"> WebFontConfig = { google: { families: ['Roboto:500,300:latin'] } }; (function() { var wf = document.createElement('script'); wf.src = ('https:' == document.location.protocol ? 'https' : 'http') + '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js'; wf.type = 'text/javascript'; wf.async = 'true'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(wf, s); })(); </script> </body> </html>
